# CH32V3xx Evaluation Board Reference

Version: V1.9

https://wch-ic.com

## 1. Overview

This evaluation board is applied to the development of the CH32V30x/CH32V317 chip. The IDE uses the MounRiver compiler, with the option of using the on-board or independent WCH-Link for emulation and download, and provides reference examples and demonstrations of chip resource-related applications.

## 2. Evaluation Board Hardware

Please refer to the CH32V307SCH.pdf document for the schematic of the evaluation board.

CH32V307 Evaluation Board

![](images/c0afb1e871700012983e4913c71ce9a0d357aca501ef53be4a28f1daad395bfb.jpg)

### Descriptions

1.Power switch

5.MCU I/O port

9.Download button

13.MCU power supply row pin

2.Voltage regulator chip

6.Power supply row pin

10.KEY

14.Main control MCU

3.USB interface

7.DUBUG interface

11.KEY and LED row pin

4. USB interface

8.Reset button

12.Network port

The above CH32V307 evaluation board comes with the following resources.

Motherboard - CH32V307EVT

1. Switch S1: Used to disconnect or connect external 5V power supply or USB power supply   
2. Forward low dropout voltage regulator chip U1: used to realize the conversion of 5V voltage to 3.3V supply voltage available to the chip   
3. USB interface P5, P15: USB communication interface PB6, PB7 of the main chip   
4. USB interface P4, P14: USB communication interface PA11, PA12 of the main chip   
5. MCU I/O ports P6, P7, P9: I/O pinout interface of the main control MCU   
6. Power supply row pin P3: 5V, 3.3V, GND external power supply row pin

7. DEBUG interface P10: for downloading, emulation debugging   
8. Button S3: Reset button for external manual reset of the main control MCU   
9. Button S4: Download button, used to start download from BOOT   
10. Key S2: Connects to the I/O port of the main MCU through the P1 row of pins for key control   
11. KEY and LED row pin P1: P1 row pin connects to the I/O of the main control MCU to control LED and KEY   
12. Network port: Network communication interface of the main chip   
13. MCU power supply row pin P11: for main control MCU power supply selection   
14. Main control MCU: CH32V307VCT6

![](images/53f78ee706b03ad9393fbe5b6646ef8b80116079a953a829fe742a98ab6f8758.jpg)  
CH32V307 Evaluation Board

### Descriptions

1. Network port   
2. USB2.0 high-speed interface   
3.MCU I/O   
4.Main control MCU

5. ARDUINO interface   
6. Reset button   
7. WCH-Link LED   
8. Power switch

9. WCH_LinkE IAP button   
10. WCH_LinkE interface   
11. SDI&UART interface   
12. WCH-LinkE MCU

13.USER button   
14. LED   
15. Voltage regulator   
16. USB full-speed interface

The CH32V307V evaluation board shown above comes with the following resources.

Motherboard - CH32V307EVT-R1

1. Network port: Network communication interface of the main chip   
2. USB interface P6: Connected to the main chip USB high-speed communication interface   
3. MCU I/O port: I/O output interface of main control MCU   
4. Main control MCU: CH32V307VCT6   
5. ARDUINO interface: Easy to connect development boards with ARDUINO interface

6. Reset button: For external manual reset of the main MCU   
7. WCH-LinkE indicator: Indicates WCH-LinkE operation status   
8. Power switch S3: For disconnecting or connecting external 5V power supply or USB power supply.   
9. WCH_LinkE IAP Button: WCH_LinkE Upgrade Button   
10. WCH-LinkE interface: For connection between PC and WCH-LinkE function module   
11. SDI&UART interface: Used for download, simulation and debugging, need jumper to choose whether to use onboard WCH-LinkE or not.   
12. WCH-LinkE MCU: MCU that realizes WCH-LinkE function.   
13. USER button S2: Connect the I/O port of the main MCU through J3 pin for key control   
14. LED: Connected to the IO port of the main MCU through J3 pin for control   
15. Voltage regulator chip U1: Used to realize the conversion of 5V voltage to 3.3V supply voltage available to the chip.   
16. USB interface P7: Connects to the main chip USB full-speed communication interface

![](images/3119f6677b6ffb809981a609bce06080556fd482be82140680726373da27b8d5.jpg)  
CH32V307 Evaluation Board

### Descriptions

1. USB high-speed interface

4. Power switch

7. Camera interface

10. Main control MCU

2. Network port

5.DEBUG interface

8. SD card holder

11. Reset button

3. USB full-speed interface

6. User button

9. Screen interface

The CH32V307V-R2 EVT board comes with the following resources.

Motherboard - CH32V307V-R2

1. USB interface P11: Connects to the main chip USB high-speed communication interface

2. Network port: Network communication interface (Gigabit) of the main chip   
3. USB interface P9: Connects to the main chip USB full-speed communication interface   
4. Power switch S2: Used to disconnect or connect external 5V power supply or USB power supply.   
5. Debugging interface: For downloading, simulation debugging   
6. Button: User button   
7. Camera interface P10: Realize MCU external camera (DVP-8bits)   
8. SD Card Holder P7: Connects to the SDIO interface and demonstrates the operation of a TF card through the SDIO interface.   
9. Screen interface P3: Realize MCU external SPI port display screen   
10. Main control MCU: CH32V307VCT6   
11. Reset button S1: For external manual reset of the main control MCU

![](images/6154a7321e549641707297f7e5590b5334d99223b607e53052f32936412cfd07.jpg)  
CH32V307 Evaluation Board

### Descriptions

1. Network port   
2. MCU I/O   
3. Debug interface

4. Main control MCU   
5、USB full-speed interface   
6、USB high-speed interface

7. Power switch   
8. Reset button   
9. Download button

The CH32V307V-R3 EVT board comes with the following resources.

Motherboard - CH32V307EVT-R3

1. Network port: Network communication interface of the main chip (100MB)   
2. MCU I/O port: I/O port of the main control MCU.   
3. Debugging interface: For downloading, simulation debugging

4. Main control MCU: CH32V307VCT6   
5. USB interface P9, P5: Connect to the main chip USB full-speed communication interface   
6. USB interface P11: Connect to the main chip USB high-speed communication interface   
7. Power switch S2: Used to disconnect or connect external 5V power supply or USB power supply.   
8. Button S1: Reset button for external manual reset of the main MCU.   
9. Button S8: Download button, used to start the download from the BOOT

![](images/488d4c77c812682cf7e8d71fc71a020f518cae27c3fe083195b3f656b6c95c36.jpg)  
CH32V305 Evaluation Board

### Descriptions

1. MCU

2. Power switch

3. Reset button

4. Debug interface

5. LED

6. USB interface

The CH32V305 EVT board comes with the following resources.

Motherboard - CH32V305EVT

1. Main control MCU: CH32V305GBU6   
2. Power switch S2: Used to disconnect or connect external 5V power supply or USB power supply.   
3. Button S1: Reset button for external manual reset of the main MCU.   
4. Debugging interface: For downloading, simulation debugging   
5. LED: Controlled by connecting to the IO port of the main chip via pins   
6. USB interface P7, P8: USB communication interface PB6, PB7 of the main chip

#### CH32V303 Evaluation Board

![](images/8c53241caf2083cf052a42cda9457a39c151a3850c4b11aec62dafe399698b16.jpg)

#### Descriptions

1.MCU

4.USB interface

7.DEBUG interface

2.Boot mode configuration

5.Power switch

8.Reset button

3.MCU I/O

6.LED

The above CH32V303 evaluation board comes with the following resources.

Motherboard - CH32V303EVT

1. Main control MCU: CH32V303CBT6   
2. Boot mode configuration P3: Select the boot mode when the chip is powered on by configuring BOOT0/1   
3. MCU I/O port P1, P2: I/O pinout interface of the main control MCU   
4. USB interface P6: USB communication interface PB6, PB7 of the main chip   
5. Switch S2: Used to disconnect or connect external 5V power supply or USB power supply   
6. LED: Connected to the main chip I/O port via pins for control   
7. DEBUG interface: for downloading, simulation debugging   
8. Button S1: Reset button for external manual reset of the main control MCU

#### CH32V303 Evaluation Board

![](images/b2e0b90348128a55ff48f184ff1ae4df602bca9dd1a4fc6bd37863d36a9aeb52.jpg)

#### Descriptions

1.Main control MCU

4.DEBUG interface

7.Voltage regulator chip

10.KEY and LED row pin

2.MCU I/O

5.MCU power supply row pin

8.Power switch

11.KEY

3.Reset button

6.Power supply row pin

9.USB interface

12.Download button

The above CH32V303 evaluation board comes with the following resources.

#### Motherboard - CH32V303EVT

1. Main control MCU: CH32V303VCT6   
2. MCU I/O ports P6, P7, P9: I/O pinout interface of the main control MCU   
3. Button S3: Reset button for external manual reset of the main control MCU   
4. DEBUG interface P10: for downloading, emulation debugging   
5. MCU power pin P11: for main MCU power supply selection   
6. Power supply pin P3: 5V, 3.3V, GND external power supply pin   
7. Forward low dropout voltage regulator chip U1: used to realize the conversion of 5V voltage to 3.3V supply voltage available to the chip   
8. Switch S1: Used to disconnect or connect external 5V power supply or USB power supply   
9. USB interface P4, P14: USB communication interface PA11, PA12 of the main chip   
10. KEY and LED row pin P1: P1 row pin connects to the I/O of the main control MCU to control LED and KEY   
11. Key S2: Connects to the I/O port of the main MCU through the P1 row of pins for key control   
12. Button S4: Download button, used to start download from BOOT

#### CH32V303 Evaluation Board

![](images/ec61c13ea451185202c0a4032b128af43623dc97f4b260bd199717d30b7b5f90.jpg)

#### Descriptions

1.Main control MCU   
2.MCU I/O   
3.Power supply row pin

4.DEBUG interface   
5.Power switch   
6.USB interface

7.USB interface   
8.Network port   
9.KEY and LED row pin

10.Download button   
11.KEY   
12.Boot mode configuration   
13.Reset button

The above CH32V30x evaluation board comes with the following resources.

#### Motherboard - CH32V30xEVT

1. Main control MCU: CH32V303WCU6   
2. MCU I/O port P6, P7: I/O pinout interface of the main control MCU   
3. Power supply row pin: for the main control MCU power supply selection   
4. DEBUG interface P10: for downloading, emulation debugging   
5. Switch S1: Used to disconnect or connect external 5V power supply or USB power supply   
6. USB interface P5, P15: USB communication interface PB6, PB7 of the main chip   
7. USB interface P4, P14: USB communication interface PA11, PA12 of the main chip   
8. Network port: Network communication interface of the main chip   
9. KEY and LED row pin P1: P1 row pin connects to the IO of the main MCU to control LED and KEY   
10. Button S4: Download button, used to start download from BOOT   
11. Key S2: Connects to the I/O port of the main control MCU through the P1 row of pins for key control   
12. Boot mode configuration: Select the boot mode when the chip is powered on by configuring BOOT0/1   
13. Button S3: Reset button for external manual reset of the main control MCU

CH32V305 Evaluation Board

![](images/8ed61853d62f7dd69c8f18379fbf7cd133c3991a4d8acd12d30f08f65f32c477.jpg)

Description

1. Main control MCU

2.. USB interface

3. DEBUG interface

4. LED pin

5. Reset button

6. Power switch

The above CH32V30x evaluation board comes with the following resources:

Motherboard - CH32V30xEVT

1. Main control MCU: CH32V305FBP6   
2. USB interface: USB communication interface of the main chip   
3. DEBUG interface: For downloading, emulation debugging   
4. LED pin: The pin is connected to the IO of the main control MCU to control the LED.   
5. Reset button: Used for external manual reset of the main control MCU   
6. Power switch: Used to cut off or connect external 5V power supply or USB power supply.

CH32V317 Evaluation Board

![](images/2bc939fcb7e93467795f4998958fb20da1595928558bdc64c13f2993d078e158.jpg)

### Descriptions

1. Main control MCU

2. DEBUG interface

3. USBFS

4. USBHS

5. Power switch

6. Boot mode configuration

7. Reset button

9. Network port

The above CH32V317 evaluation board comes with the following resources:

Motherboard - CH32V317EVT

1. Main control MCU: CH32V317WCU6   
2. DEBUG interface: For downloading, emulation debugging   
3. USBFS: USBFS communication interfaces PA11, PA12   
4. USBHS: USBHS communication interface PB6, PB7   
5. Power switch: Used to cut off or connect external 5V power supply or USB power supply.   
6. Boot mode configuration: Configure BOOT0 to select the boot mode when the chip is powered on.   
7. Reset button: Used for external manual reset of the main control MCU   
8. Key: Connect to the IO port of the main MCU through the key pin for key control.   
9. Network port: The network communication interface of the main chip.

## 3. Software Development

### 3.1 EVT Package Directory Structure

![](images/e4a8e7578a5896822e8fb9f0bb9f9f810b93e737964a8997b4678b414c0b34ea.jpg)

Description.

PUB folder: provides evaluation board manuals, evaluation board schematics.

EXAM folder: Provides software development drivers and corresponding examples for the CH32V307 controller, grouped by peripheral. Each type of peripheral folder contains one or more functional application routines folders.

### 3.2 IDE Use -MounRiver

Download MounRiver_Studio, double click to install it, and you can use it after installation. (MounRiver_Studio instructions are available at the path: MounRiver\MounRiver_Studio\ MounRiver_Help.pdf and MounRiver_ToolbarHelp.pdf)

#### 3.2.1 Open Project

 Open project:

1) Double-click project file directly with the suffix name .wvproj under the corresponding project path.   
2) Click File in MounRiver IDE, click Load Project, select the .project file under the corresponding path, and click Confirm to apply it.

#### 3.2.2 Compilation

MounRiver contains three compilation options, as shown in the following figure.

![](images/5bd906afd66914238140a684ef03ce648a1e74db8f90dab8ac224a3c634ae7dd.jpg)

Compile option 1 is Incremental Build, which compiles the modified parts of the selected project.

Compile option 2 is ReBuild, which performs a global compilation of the selected project.

Compile option 3 is All Build, which performs global compilation for all projects.

#### 3.2.3 Download/Simulation

####  Download

#### 1) Debugger download

Connect to the hardware via WCH-Link (see WCH-Link instructions for details, path: MounRiver\MounRiver_Studio\ WCH-Link instructions.pdf), click the Download button on the IDE, and select Download in the pop-up interface, as shown in the figure below.

$\mathfrak { v }$

![](images/7b72d908754be1224e1279e3e0a648bfe8408e7202f443c6fa30af64996f2d74.jpg)

![](images/5349358c2cd76f375277a55f3de822f7b869629ad6c19e126bacae8c1a607731.jpg)

![](images/edff955c7a5fc9cba8416b6001e353eb9d1d8f98a9f87240374e7f21d32f7e88.jpg)

![](images/3d5b42776b3c21c38417d028ee301e3b0a33d0a3c8a719be31fb59722d77e448.jpg)

![](images/65fb21650d3337fb9262c69141b6795262768f31aadce3e8e40bddc38cdac75e.jpg)

![](images/8fc7bd642409371f0e3cabd04e682a6936287c07a1fe7e25002185e84e20ed80.jpg)

![](images/9f60532411b04ec7cd2ce4224d2140ab35a388bddafdc3e77a0a78fc850c475f.jpg)

![](images/54e5c9b0e47fdf1ffa6f76886818082c13d626f85ec4d3a4252e6be116fba660.jpg)

debug.h debug.h

![](images/e38e27a587c451952a03650c6f48303b6e01eba54ffb93a1ecc1fcc3abe3eda0.jpg)

TxBuf:u1

Calibrattio Calibrattio

![](images/556a9b1bb6743711e6e1c3f9087136b3df48fd2592f46a1bb976747c7e6661da.jpg)

ADC Funct ADCFunct

GetADCV GetADCV

seAll

![](images/d149415031eeed31d572ad7411716340c1b2a17042bf7a54cf81df3c0ca81cf8.jpg)

qram

![](images/15328566c3a881186f99ed1bddaa6aa5321450f3d80836dce127ab95fa4da01a.jpg)

![](images/d896b95234578fc4b7f6dc241ad890fe5659101ef9142615126f4cc30dd89f7e.jpg)

Resetand run

0000#19:25:42:529>>Query Success

Set Configuration

![](images/4b83e83b24a29cfb2f0e4d320bdaf2e8cceb9673ff204e9c8b94883112771ef5.jpg)

![](images/ea7f5dd9ef50b8c426af8ec51ce3813e2b4da7a23aa3489dea787d01345829c7.jpg)

Apply and Close

Cancel

upgrade firmware if neces Already the latest vers

1 for querying the chip read protection status.   
2 for setting the chip read protection and re-powering the configuration to take effect.   
3 for lifting the chip read protection and re-powering the configuration to take effect.

#### 2) WCHISPTool Download

The WCHISPTool tool is used to download the chip, supporting both USB and serial port. the USB pins are PA11 (DM), PA12 (DP) or PB6 (DM), PB7 (DP), and the serial port pins are PA9 (TX), PA10 (RX). The download process is.

(1) BOOT0 to VCC and BOOT1 to ground, connected to PC via serial or USB.   
(2) Open the WCHISPTool tool, select the appropriate download method, choose to download the firmware, check the chip configuration and click download.   
(3) BOOT0 is grounded, re-powered and running the APP program.

The WCHISPTool tool interface is shown in the following figure.

![](images/2f94d7cf091a8e9b7b2f0b608698fb2ea2318d5d27913520bd690d58679ab818.jpg)

####  Simulation

Open MounRiver Studio software for debugging configuration

![](images/20527262e3cd1e67d4728a17acdbc10aee161e4e948378914410482475a90802.jpg)

#### 1) Toolbar description

Click Debug button in the menu bar to enter the download, see the image below, the download toolbar.

![](images/9328193a637cdacd677d6a8a4d121a37621825cc02f3f2176f279e272dd31193.jpg)

Detailed functions are as follows.

1. Restart: After reset, the program returns to the beginning.   
2. Continue: Click to continue debugging.   
3. Terminate: Click to exit debugging.   
4. Single-step jump-in: For each key click, the program runs one step and encounters a function to enter and execute.   
5. Single-step skip: jump out of the function and prepare the next statement.   
6. Single-step return: return to the function that was jumped into   
7. Instruction set single-step mode: click to enter instruction set debugging (need to use with 4, 5 and 6 functions).   
2) Set breakpoints

Double-click on the left side of the code to set a breakpoint, double click again to cancel the breakpoint, set the breakpoint as shown in the following figure;

![](images/789d89063007d58a0e4e6574251911d3a84c97e6b804243fc0c031336c846835.jpg)

#### 3) Interface display

#### (1) Instruction set interface

Click on the instruction set single-step debugging can enter the instruction debugging, to single-step jump in for example, click once to run once, the running cursor will move to view the program running, the instruction set interface is shown as follows.

![](images/4aa5a8814d6fd7b88f914b8bfd4940fc641319402f2575f860a69809aab86348.jpg)

#### (2) Program running interface

It can be used with instruction set single-step debugging, still take single-step jumping in as an example, click once to run once, the running cursor will move to view the program running, the program running interface is shown as follows.

![](images/9a3c44b9e65e2cc4ca7328eca576b556a824cb2402c0aa465f16df168de5ba97.jpg)

#### 4) Variables

Hover over the variable in the source code to display the details, or select the variable and right-click add watch expression

![](images/9903d61617b28bf5a8738583e5f1eccecc2b9573a8bab19336cf208192ead6f8.jpg)

Fill in the variable name, or just click OK to add the variable you just selected to the pop-up.

![](images/9f964f8629e711cdd45f7fc1efc156b6010e7784e7cf5dd4977092c26fb317e3.jpg)

#### 5) Peripheral registers

In the lower left corner of IDE interface Peripherals interface shows a list of peripherals, tick the peripherals will display its specific register name, address, value in the Memory window.

![](images/38949ef21495eb5fe1a51fb0f79964c934ed13a0fd289ffe6a3bdc76be9afe04.jpg)

![](images/fde488e588712b0c0252fe3619c260fd5650cde9a8edecb2019720f4fa9c01f9.jpg)

#### Note:

(1) When debugging, click the icon in the upper right corner to enter the original interface.

![](images/01f7da06ca3b74bc469ba1cd5ed191676daadac3d933a1a821fc7ac7c05e59a3.jpg)

(2) For documentation to access the compiler, click F1 to access the help documentation for detailed instructions.

###  Engineering Chip Selection

In the course of the project there are a variety of chip selection, to CH32V307 development board used chip CH32V307VCT6 as an example of engineering chip selection compilation, has achieved different peripheral functions, the steps are as follows.

1) Click Peripheral- $>$ inc folder ch32v30x.h file to check the chip type, as shown below, because the chip type is CH32V307VCT6, so choose CH32V30x_D8C. (Note: If you use CH32V303x series chip choose CH32V30x_D8)

![](images/3ed0f4ede198b3ee0bb27ecad236e206d3a39110eadd29d8e568b872261fda4f.jpg)

2) Select the startup file, click on the Startup folder, select the corresponding startup file defined, as shown below, because step 1 select CH32V30x_D8C, so select the startup_ch32v30x_D8C.S file (Note: If using CH32V303x series chips select startup_ch32v30x_D8.S)

![](images/501a563a82108110ca1a9a33932d68f5e1f7204e750eb5a6544f6a25625f95bf.jpg)

Note: In the project is not used in the file, such as in the folder file click delete, will lead to the file directly deleted to the return station, re-use needs to recompile to be able to, so for no use of the file is recommended to use the participate / exclude compile function, to Startup folder compile / exclude a brief description. First of all, select the project right click, select the compile involved/excluded function button, take the startup_ch32v30x_D8.S file in the figure as an example, if the project status is excluded compile, click this function can be involved in compile. Anyway, if the project status is compile-in, click this function to compileout. The same applies to folders.

![](images/a67a00e2686bb8f443af5b80470c6c401780a562e50ab029e8f0e2bc11f9f5e3.jpg)

## 4. WCH-LinkUtility.exe Download

The download process for the chip using the WCH-LinkUtility tool is:

1) Connect WCH-Link   
2) Select chip information   
3) Add firmware   
4) If the chip is read protected, you need to release the chip read protection.   
5) Execute

![](images/d50b6c563bd74f125d5a35c689f07c11c3a0ce3deed8e5a0ddd8cf32b07c1971.jpg)

## 5. WCHISPTool.exe Download

The WCHISPTool tool is used to download the chip, supporting both USB and serial port. the USB pins are PA11 (DM), PA12 (DP) or PB6 (DM), PB7 (DP), and the serial port pins are PA9 (TX), PA10 (RX). The download process is:

1) BOOT0 to VCC and BOOT1 to ground, connected to PC via serial port or USB.   
2) Open the WCHISPTool tool, select the appropriate download method, choose to download the firmware, check the chip configuration and click on download.   
3) BOOT0 is grounded, re-powered and running the APP program.

The WCHISPTool tool interface is shown in the following figure.

![](images/36d980ba00c80bf49d21373799a67ff842b5fa6707c3a4949fd7cf6037fe04d4.jpg)

1. Select MCU series and chip model   
2. Select the serial port download mode   
3. Identify the device, usually automatically, if it fails to identify, you need to select manually   
4. Select the firmware, select the downloaded .hex or .bin target program file   
5. Configure the download according to the requirements   
6. Click download

## 6. Statement of Attention

WCH official website: https://www.wch-ic.com/

WCH-LINK instructions for use: https://www.wch-ic.com/products/WCH-Link.html